{#
/**
 * @file
 * Template to display a stripe legend for a calendar view.
 *
 * Available variables:
 * - headers: the header labels
 * - rows: an associative array holding all rows, each row defines:
 *   - label: the label of the entity of the current row
 *   - stripe: the hex code of the color
 *
 * @see template_preprocess_calendar_stripe_legend()
 *
 * @ingroup themeable
 */
#}
<div class="calendar calendar-legend">
  <table class="table table-responsive">
{% set numCols = 1 %}
{% set totalCols = 4 %}
{% set count = rows.0['#rows'] | length %}
<thead>
<tr>
<th colspan="{{ totalCols * 2 }}">Legend</th>
</tr>
</thead>
    <tbody>
      {% for row in rows %}
{% if numCols == 1 %}
        <tr>
      {% endif %}
          <td>{{ row.label }}</td>
          <td><div style="background-color:{{ row.stripe }};color:{{ row.stripe }};" class="calendar-legend" title="Key: {{ row.label }}">{{ row.stripe }} &nbsp;</div></td>
{% if (loop.last == true and numCols < totalCols) %}
{% for i in range(numCols,totalCols) %}
<td>&nbsp;</td>
{% endfor %}
{% endif %}
{% set numCols = numCols + 1 %}
{% if (numCols == totalCols)  %}
        </tr>
{% set numCols = 1 %}
      {% endif %}
      {% endfor %}
    </tbody>
  </table>
</div>
